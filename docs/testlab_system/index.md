# テストラボシステムとは

## 目的

テストラボシステムという動作可能なソフトウェアシステムを通じてコンテナフォーマットを体験し、
活用するために役立てることを目的としています。

「テストラボ・システム」は、コンテナフォーマットを利用しで学ぶためのシンプルでわかりやすい情報システムです。

実験的な用途で利用できる動作可能なソフトウェアと手順を提供しており、
以下のようなコンテナフォーマットに関わる実装と OSS を組み合わせたシステムです。

- スマートフォンのセンサを利用したコンテナフォーマット出力センサ
- スキーマリポジトリの実装
- コンテナ処理機能の実装

## 機能概要

テストラボシステムで実現している機能の概要は以下である。

1. スマートフォンのジャイロセンサ(加速度、傾き)を入力として利用します。
2. センサデータをコンテナによって流通させます。
3. 流通させたコンテナから値を取り出し可視化します。

## システム構成

メッセージング機能をハブとして、各機能間を接続してシステムを実現しています。

![システム構成](environment/overview.drawio.png)

- スマートフォンセンサ機能
  - スマートフォンのジャイロセンサ(加速度、傾き)をコンテナにして送信します。
- メッセージング機能
  - PubSub と呼ばれる形式でデータのメッセージングを行う機能です。
    - チャンネルにデータを Publish(発行)する機能を持ちます。
    - チャンネルに流れてきたデータを Subscribe(購読)して処理に用います。
    - チャンネルには任意の文字列を使います。
- コンテナ処理機能
  - コンテナを受信し、可視化のためのデータを送信します。
  - スキーマリポジトリと連携しコンテナへ標準的な処理を行います
- スキーマリポジトリ
  - コンテナの構造を定義したファイルを管理、配布します。
  - コンテナの構造を定義するための画面も提供します。
- 可視化機能
  - コンテナ処理機能が処理したデータを DB に格納します。
  - DB に格納されたデータを可視化します。
    より送られてきたデータがメッセージング機能を通じてコンテナ処理機能に渡されます。  
    コンテナ処理機能ではスキーマリポジトリを参照され、コンテナの構造に従ってデータを取り出します。  
    取り出したデータは、可視化機能の持つデータベースに書き込みを Web アプリケーション上で参照できます。

## 利用上の注意

テストラボシステムと呼称するソフトウェア群は以下の注意事項があります。

:::caution
[Container Format で示された仕様](./spec_guide)と差異がある。  
国際標準化の過程で内容が更新されたためである。

差異の一覧

| 項目     | 仕様                                                      | テストラボシステム実装                                  |
| -------- | --------------------------------------------------------- | ------------------------------------------------------- |
| 名称変更 | Data Id Type                                              | Data Index                                              |
| 仕様変更 | コンテナヘッダ内の Data Id の長さは Data Id Length で示す | Data Id の長さは Data Index の値に対応した値            |
| 仕様変更 | Data Id Length をヘッダに持つ                             | Data Id Length がヘッダにない                           |
| 仕様違反 | Container Type として決められた値群がある                 | Container Type に認められてない値(`0x0000`)を入れている |

:::
